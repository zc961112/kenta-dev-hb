<template>
  <div class="c-filter-more">
    <div class="cfm-group">
      <div class="cfm-title">Sort by</div>
      <div class="cfm-form">
        <el-select v-model="form.sortBy" placeholder="Popularity" style="width: 100%;">
          <el-option
            v-for="item in query.fields"
            :key="item"
            :value="item"
          >
            {{ item }}
          </el-option>
        </el-select>
      </div>
    </div>
    <div class="cfm-group">
      <div class="cfm-title">Price for a night in USD</div>
      <div class="cfm-form">
        <el-slider v-model="form.priceRange" range :show-tooltip="false" :max="query.maxPrice" />
      </div>
      <div class="cfm-form-price">
        <div class="cfm-price-item">
          <span class="cfmp-label">From</span>
          <span class="cfmp-num">${{ form.priceRange[0] || 0 }}</span>
        </div>
        <div class="cfm-price-item lb">
          <span class="cfmp-label">To</span>
          <span class="cfmp-num">${{ form.priceRange[1] || 0 }}</span>
        </div>
      </div>
    </div>
    <div class="cfm-group">
      <div class="cfm-title">Location</div>
      <div class="cfm-text">ðŸš© from the city center.</div>
      <div class="cfm-form-loc">
        <el-slider v-model="form.location" :show-tooltip="false" :max="query.maxDistance" class="cfml-slider" />
        <span class="cfml-label">{{ form.location }}km</span>
      </div>
    </div>
    <div class="cfm-group">
      <div class="cfm-title">Star Rating</div>
      <div class="cfm-list">
        <div class="cfm-g-row">
          <input v-model="form.star" type="checkbox" value="5" name="starForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="16" viewBox="0 0 80 16" fill="none">
              <path d="M7.52771 1.35869C7.68335 0.910913 8.31662 0.910912 8.47227 1.35869L9.76666 5.08249C9.83532 5.28003 10.0197 5.41396 10.2288 5.41823L14.1703 5.49855C14.6443 5.50821 14.8399 6.11048 14.4622 6.39688L11.3206 8.77864C11.154 8.90498 11.0836 9.12169 11.1441 9.32186L12.2857 13.0953C12.423 13.5491 11.9107 13.9213 11.5216 13.6505L8.28558 11.3987C8.11392 11.2793 7.88605 11.2793 7.7144 11.3987L4.47842 13.6505C4.08929 13.9213 3.57697 13.5491 3.71425 13.0953L4.85586 9.32186C4.91642 9.12169 4.846 8.90498 4.67935 8.77864L1.5378 6.39688C1.16003 6.11048 1.35572 5.50821 1.82968 5.49855L5.77122 5.41823C5.9803 5.41396 6.16465 5.28003 6.23331 5.08249L7.52771 1.35869Z" fill="#FFB800"/>
              <path d="M23.5277 1.35869C23.6834 0.910913 24.3166 0.910912 24.4723 1.35869L25.7667 5.08249C25.8353 5.28003 26.0197 5.41396 26.2288 5.41823L30.1703 5.49855C30.6443 5.50821 30.8399 6.11048 30.4622 6.39688L27.3206 8.77864C27.154 8.90498 27.0836 9.12169 27.1441 9.32186L28.2857 13.0953C28.423 13.5491 27.9107 13.9213 27.5216 13.6505L24.2856 11.3987C24.1139 11.2793 23.8861 11.2793 23.7144 11.3987L20.4784 13.6505C20.0893 13.9213 19.577 13.5491 19.7142 13.0953L20.8559 9.32186C20.9164 9.12169 20.846 8.90498 20.6794 8.77864L17.5378 6.39688C17.16 6.11048 17.3557 5.50821 17.8297 5.49855L21.7712 5.41823C21.9803 5.41396 22.1646 5.28003 22.2333 5.08249L23.5277 1.35869Z" fill="#FFB800"/>
              <path d="M39.5277 1.35875C39.6834 0.910974 40.3166 0.910973 40.4723 1.35875L41.7667 5.08256C41.8353 5.28009 42.0197 5.41403 42.2288 5.41829L46.1703 5.49861C46.6443 5.50827 46.8399 6.11054 46.4622 6.39694L43.3206 8.7787C43.154 8.90504 43.0836 9.12175 43.1441 9.32192L44.2857 13.0954C44.423 13.5491 43.9107 13.9213 43.5216 13.6506L40.2856 11.3988C40.1139 11.2793 39.8861 11.2793 39.7144 11.3988L36.4784 13.6506C36.0893 13.9213 35.577 13.5491 35.7142 13.0954L36.8559 9.32192C36.9164 9.12175 36.846 8.90504 36.6794 8.7787L33.5378 6.39694C33.16 6.11054 33.3557 5.50827 33.8297 5.49861L37.7712 5.41829C37.9803 5.41403 38.1646 5.28009 38.2333 5.08256L39.5277 1.35875Z" fill="#FFB800"/>
              <path d="M55.5277 1.35875C55.6834 0.910974 56.3166 0.910973 56.4723 1.35875L57.7667 5.08256C57.8353 5.28009 58.0197 5.41403 58.2288 5.41829L62.1703 5.49861C62.6443 5.50827 62.8399 6.11054 62.4622 6.39694L59.3206 8.7787C59.154 8.90504 59.0836 9.12175 59.1441 9.32192L60.2857 13.0954C60.423 13.5491 59.9107 13.9213 59.5216 13.6506L56.2856 11.3988C56.1139 11.2793 55.8861 11.2793 55.7144 11.3988L52.4784 13.6506C52.0893 13.9213 51.577 13.5491 51.7142 13.0954L52.8559 9.32192C52.9164 9.12175 52.846 8.90504 52.6794 8.7787L49.5378 6.39694C49.16 6.11054 49.3557 5.50827 49.8297 5.49861L53.7712 5.41829C53.9803 5.41403 54.1646 5.28009 54.2333 5.08256L55.5277 1.35875Z" fill="#FFB800"/>
              <path d="M71.5277 1.35875C71.6834 0.910974 72.3166 0.910973 72.4723 1.35875L73.7667 5.08256C73.8353 5.28009 74.0197 5.41403 74.2288 5.41829L78.1703 5.49861C78.6443 5.50827 78.8399 6.11054 78.4622 6.39694L75.3206 8.7787C75.154 8.90504 75.0836 9.12175 75.1441 9.32192L76.2857 13.0954C76.423 13.5491 75.9107 13.9213 75.5216 13.6506L72.2856 11.3988C72.1139 11.2793 71.8861 11.2793 71.7144 11.3988L68.4784 13.6506C68.0893 13.9213 67.577 13.5491 67.7142 13.0954L68.8559 9.32192C68.9164 9.12175 68.846 8.90504 68.6794 8.7787L65.5378 6.39694C65.16 6.11054 65.3557 5.50827 65.8297 5.49861L69.7712 5.41829C69.9803 5.41403 70.1646 5.28009 70.2333 5.08256L71.5277 1.35875Z" fill="#FFB800"/>
            </svg>
          </span>
          <span class="cfm-g-text">{{ query.star5 }}</span>
        </div>
        <div class="cfm-g-row">
          <input v-model="form.star" type="checkbox" value="4" name="starForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="16" viewBox="0 0 80 16" fill="none">
              <path d="M7.52771 1.35869C7.68335 0.910913 8.31662 0.910912 8.47227 1.35869L9.76666 5.08249C9.83532 5.28003 10.0197 5.41396 10.2288 5.41823L14.1703 5.49855C14.6443 5.50821 14.8399 6.11048 14.4622 6.39688L11.3206 8.77864C11.154 8.90498 11.0836 9.12169 11.1441 9.32186L12.2857 13.0953C12.423 13.5491 11.9107 13.9213 11.5216 13.6505L8.28558 11.3987C8.11392 11.2793 7.88605 11.2793 7.7144 11.3987L4.47842 13.6505C4.08929 13.9213 3.57697 13.5491 3.71425 13.0953L4.85586 9.32186C4.91642 9.12169 4.846 8.90498 4.67935 8.77864L1.5378 6.39688C1.16003 6.11048 1.35572 5.50821 1.82968 5.49855L5.77122 5.41823C5.9803 5.41396 6.16465 5.28003 6.23331 5.08249L7.52771 1.35869Z" fill="#FFB800"/>
              <path d="M23.5277 1.35869C23.6834 0.910913 24.3166 0.910912 24.4723 1.35869L25.7667 5.08249C25.8353 5.28003 26.0197 5.41396 26.2288 5.41823L30.1703 5.49855C30.6443 5.50821 30.8399 6.11048 30.4622 6.39688L27.3206 8.77864C27.154 8.90498 27.0836 9.12169 27.1441 9.32186L28.2857 13.0953C28.423 13.5491 27.9107 13.9213 27.5216 13.6505L24.2856 11.3987C24.1139 11.2793 23.8861 11.2793 23.7144 11.3987L20.4784 13.6505C20.0893 13.9213 19.577 13.5491 19.7142 13.0953L20.8559 9.32186C20.9164 9.12169 20.846 8.90498 20.6794 8.77864L17.5378 6.39688C17.16 6.11048 17.3557 5.50821 17.8297 5.49855L21.7712 5.41823C21.9803 5.41396 22.1646 5.28003 22.2333 5.08249L23.5277 1.35869Z" fill="#FFB800"/>
              <path d="M39.5277 1.35875C39.6834 0.910974 40.3166 0.910973 40.4723 1.35875L41.7667 5.08256C41.8353 5.28009 42.0197 5.41403 42.2288 5.41829L46.1703 5.49861C46.6443 5.50827 46.8399 6.11054 46.4622 6.39694L43.3206 8.7787C43.154 8.90504 43.0836 9.12175 43.1441 9.32192L44.2857 13.0954C44.423 13.5491 43.9107 13.9213 43.5216 13.6506L40.2856 11.3988C40.1139 11.2793 39.8861 11.2793 39.7144 11.3988L36.4784 13.6506C36.0893 13.9213 35.577 13.5491 35.7142 13.0954L36.8559 9.32192C36.9164 9.12175 36.846 8.90504 36.6794 8.7787L33.5378 6.39694C33.16 6.11054 33.3557 5.50827 33.8297 5.49861L37.7712 5.41829C37.9803 5.41403 38.1646 5.28009 38.2333 5.08256L39.5277 1.35875Z" fill="#FFB800"/>
              <path d="M55.5277 1.35875C55.6834 0.910974 56.3166 0.910973 56.4723 1.35875L57.7667 5.08256C57.8353 5.28009 58.0197 5.41403 58.2288 5.41829L62.1703 5.49861C62.6443 5.50827 62.8399 6.11054 62.4622 6.39694L59.3206 8.7787C59.154 8.90504 59.0836 9.12175 59.1441 9.32192L60.2857 13.0954C60.423 13.5491 59.9107 13.9213 59.5216 13.6506L56.2856 11.3988C56.1139 11.2793 55.8861 11.2793 55.7144 11.3988L52.4784 13.6506C52.0893 13.9213 51.577 13.5491 51.7142 13.0954L52.8559 9.32192C52.9164 9.12175 52.846 8.90504 52.6794 8.7787L49.5378 6.39694C49.16 6.11054 49.3557 5.50827 49.8297 5.49861L53.7712 5.41829C53.9803 5.41403 54.1646 5.28009 54.2333 5.08256L55.5277 1.35875Z" fill="#FFB800"/>
              <path d="M71.4288 10.9884L71.7144 11.3988L71.4288 10.9884L68.1928 13.2402L69.3344 9.46671C69.4556 9.06637 69.3147 8.63295 68.9814 8.38026L65.8399 5.9985L69.7814 5.91818C70.1996 5.90966 70.5683 5.64179 70.7056 5.24672L72 1.52292L73.2944 5.24672C73.4317 5.64179 73.8004 5.90966 74.2186 5.91818L78.1601 5.9985L75.0185 8.38026C74.6852 8.63295 74.5444 9.06637 74.6655 9.46671L75.8071 13.2402L72.5712 10.9884C72.2278 10.7495 71.7721 10.7495 71.4288 10.9884Z" stroke="#FFB800" stroke-width="0.999998"/>
            </svg>
          </span>
          <span class="cfm-g-text">{{ query.star4 }}</span>
        </div>
        <div class="cfm-g-row">
          <input v-model="form.star" type="checkbox" value="3" name="starForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="16" viewBox="0 0 80 16" fill="none">
              <path d="M7.52771 1.35869C7.68335 0.910913 8.31662 0.910912 8.47227 1.35869L9.76666 5.08249C9.83532 5.28003 10.0197 5.41396 10.2288 5.41823L14.1703 5.49855C14.6443 5.50821 14.8399 6.11048 14.4622 6.39688L11.3206 8.77864C11.154 8.90498 11.0836 9.12169 11.1441 9.32186L12.2857 13.0953C12.423 13.5491 11.9107 13.9213 11.5216 13.6505L8.28558 11.3987C8.11392 11.2793 7.88605 11.2793 7.7144 11.3987L4.47842 13.6505C4.08929 13.9213 3.57697 13.5491 3.71425 13.0953L4.85586 9.32186C4.91642 9.12169 4.846 8.90498 4.67935 8.77864L1.5378 6.39688C1.16003 6.11048 1.35572 5.50821 1.82968 5.49855L5.77122 5.41823C5.9803 5.41396 6.16465 5.28003 6.23331 5.08249L7.52771 1.35869Z" fill="#FFB800"/>
              <path d="M23.5277 1.35869C23.6834 0.910913 24.3166 0.910912 24.4723 1.35869L25.7667 5.08249C25.8353 5.28003 26.0197 5.41396 26.2288 5.41823L30.1703 5.49855C30.6443 5.50821 30.8399 6.11048 30.4622 6.39688L27.3206 8.77864C27.154 8.90498 27.0836 9.12169 27.1441 9.32186L28.2857 13.0953C28.423 13.5491 27.9107 13.9213 27.5216 13.6505L24.2856 11.3987C24.1139 11.2793 23.8861 11.2793 23.7144 11.3987L20.4784 13.6505C20.0893 13.9213 19.577 13.5491 19.7142 13.0953L20.8559 9.32186C20.9164 9.12169 20.846 8.90498 20.6794 8.77864L17.5378 6.39688C17.16 6.11048 17.3557 5.50821 17.8297 5.49855L21.7712 5.41823C21.9803 5.41396 22.1646 5.28003 22.2333 5.08249L23.5277 1.35869Z" fill="#FFB800"/>
              <path d="M39.5277 1.35875C39.6834 0.910974 40.3166 0.910973 40.4723 1.35875L41.7667 5.08256C41.8353 5.28009 42.0197 5.41403 42.2288 5.41829L46.1703 5.49861C46.6443 5.50827 46.8399 6.11054 46.4622 6.39694L43.3206 8.7787C43.154 8.90504 43.0836 9.12175 43.1441 9.32192L44.2857 13.0954C44.423 13.5491 43.9107 13.9213 43.5216 13.6506L40.2856 11.3988C40.1139 11.2793 39.8861 11.2793 39.7144 11.3988L36.4784 13.6506C36.0893 13.9213 35.577 13.5491 35.7142 13.0954L36.8559 9.32192C36.9164 9.12175 36.846 8.90504 36.6794 8.7787L33.5378 6.39694C33.16 6.11054 33.3557 5.50827 33.8297 5.49861L37.7712 5.41829C37.9803 5.41403 38.1646 5.28009 38.2333 5.08256L39.5277 1.35875Z" fill="#FFB800"/>
              <path d="M71.4288 10.9884L71.7144 11.3988L71.4288 10.9884L68.1928 13.2402L69.3344 9.46671C69.4556 9.06637 69.3147 8.63295 68.9814 8.38026L65.8399 5.9985L69.7814 5.91818C70.1996 5.90966 70.5683 5.64179 70.7056 5.24672L72 1.52292L73.2944 5.24672C73.4317 5.64179 73.8004 5.90966 74.2186 5.91818L78.1601 5.9985L75.0185 8.38026C74.6852 8.63295 74.5444 9.06637 74.6655 9.46671L75.8071 13.2402L72.5712 10.9884C72.2278 10.7495 71.7721 10.7495 71.4288 10.9884Z" stroke="#FFB800" stroke-width="0.999998"/>
              <path d="M55.4288 10.9884L55.7144 11.3988L55.4288 10.9884L52.1928 13.2402L53.3344 9.46671C53.4556 9.06637 53.3147 8.63295 52.9814 8.38026L49.8399 5.9985L53.7814 5.91818C54.1996 5.90966 54.5683 5.64179 54.7056 5.24672L56 1.52292L57.2944 5.24672C57.4317 5.64179 57.8004 5.90966 58.2186 5.91818L62.1601 5.9985L59.0185 8.38026C58.6852 8.63295 58.5444 9.06637 58.6655 9.46671L59.8071 13.2402L56.5712 10.9884C56.2278 10.7495 55.7721 10.7495 55.4288 10.9884Z" stroke="#FFB800" stroke-width="0.999998"/>
            </svg>
          </span>
          <span class="cfm-g-text">{{ query.star3 }}</span>
        </div>
      </div>
    </div>
    <div class="cfm-group">
      <div class="cfm-title">Meals</div>
      <div class="cfm-list">
        <div class="cfm-g-row">
          <input v-model="form.meal" type="checkbox" value="no" name="mealForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">No meals included</span>
          <span class="cfm-g-text">18</span>
        </div>
        <div class="cfm-g-row">
          <input v-model="form.meal" type="checkbox" value="b" name="mealForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">Breakfast included</span>
          <span class="cfm-g-text">18</span>
        </div>
        <div class="cfm-g-row">
          <input v-model="form.meal" type="checkbox" value="bd" name="mealForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">Breakfast + dinner or lunch included</span>
          <span class="cfm-g-text">18</span>
        </div>
        <div class="cfm-g-row">
          <input v-model="form.meal" type="checkbox" value="all" name="mealForm" class="cfm-g-checkbox">
          <span class="cfm-g-label">All Inclusive</span>
          <span class="cfm-g-text">18</span>
        </div>
      </div>
    </div>
    <div class="cfm-footer">
      <a class="cfm-btn" @click="handleReset">Reset</a>
      <a class="cfm-btn" @click="handleCancel">Cancel</a>
      <el-button style="width: 123px;" type="primary" @click="handleApply">Apply</el-button>
    </div>
  </div>
</template>

<script>
export default {
  props: {
    filterQuery: Object
  },
  data () {
    return {
      query: {},
      form: {
        sortBy: '',
        priceRange: [],
        distance: 0,
        star: [],
        meal: ''
      }
    }
  },
  mounted () {
    this.query = this.filterQuery
  },
  methods: {
    handleReset () {
      this.form.sortBy = ''
      this.form.priceRange = []
      this.form.distance = 0
      this.form.star = []
      this.form.meal = ''
    },
    handleCancel () {
      this.$emit('close')
    },
    handleApply () {
      this.$emit('apply', this.form)
    }
  }
}
</script>

<style lang="scss" scoped>
.c-filter-more {
  position: fixed;
  left: 0;
  bottom: 0;
  top: 65px;
  width: 380px;
  background-color: #FEFEFE;
  border-right: 1px solid #DADADA;
  box-shadow: 2px 15px 16px 0px rgba(0, 0, 0, 0.16);
  z-index: 999;
  overflow-y: auto;
  .cfm-group {
    padding: 16px 32px;
  }
  :deep(.el-slider__button) {
    border-color: #FF3263;
  }
  :deep(.el-slider__bar) {
    background-color: #FF3263;
  }
  .cfm-title {
    padding: 8px 0;
    border-bottom: 1px solid rgba(26, 26, 26, 0.16);
    color: #1A1A1A;
    font-size: 16px;
  }
  .cfm-text {
    margin-top: 16px;
    color: rgba(26, 26, 26, 0.60);
    font-size: 16px;
  }
  .cfm-form {
    margin-top: 16px;
  }
  .cfm-form-price {
    display: flex;
    align-items: center;
    height: 48px;
    border-radius: 4px;
    border: 1px solid #DADADA;
    background: #FEFEFE;
  }
  .cfm-price-item {
    position: relative;
    flex: 1;
    min-width: 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 16px;
    &.lb:before {
      content: '';
      position: absolute;
      left: 0;
      top: -15px;
      bottom: -15px;
      width: 1px;
      background-color: #DADADA;
    }
  }
  .cfmp-label {
    color: rgba(26, 26, 26, 0.60);
    font-size: 12px;
  }
  .cfmp-num {
    color: rgba(26, 26, 26, 0.60);
    font-size: 16px;
  }
  .cfm-form-loc {
    display: flex;
    align-items: center;
  }
  .cfml-slider {
    flex: 1;
    min-width: 0;
  }
  .cfml-label {
    margin-left: 16px;
    padding: 16px 28px;
    border-radius: 4px;
    border: 1px solid #DADADA;
    background: #FEFEFE;
    color: rgba(26, 26, 26, 0.60);
    font-size: 16px;
  }
  .cfm-list {
    margin-top: 16px;
  }
  .cfm-g-row {
    display: flex;
    align-items: center;
    margin-top: 16px;
  }
  .cfm-g-checkbox {
    accent-color: #FF3263;
  }
  .cfm-g-text {
    margin-left: 8px;
    width: 90px;
    text-align: right;
    color: rgba(26, 26, 26, 0.60);
    font-size: 16px;
  }
  .cfm-g-label {
    flex: 1;
    min-width: 0;
    margin-left: 8px;
    color: rgba(26, 26, 26, 0.60);
    font-size: 16px;
  }
  .cfm-footer {
    padding: 16px 30px 16px 50px;
    display: flex;
    align-items: center;
    border-top: 1px solid #DADADA;
  }
  .cfm-btn {
    margin-right: 40px;
    color: #FF3263;
    font-size: 16px;
    cursor: pointer;
  }
}
</style>
